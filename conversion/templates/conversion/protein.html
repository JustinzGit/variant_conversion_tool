{% extends "conversion/layout.html" %}

{% block body %}
    <table id="variant_table" class="table">
        <thead class="thead-dark">
            <tr>
                <th style="width: 200px" scope="col">Gene</th>
                <th style="width: 200px" scope="col">Protein</th>
                <th style="width: 200px" scope="col">Coding</th>
                <th style="width: 360px" scope="col">Genomic</th>
                <th style="width: 300px" scope="col">VarID</th>
            </tr>
        </thead>
        <tbody>
        {% for coding, genomic in variants %}
            <tr>
                <td>{{ gene_name }}</td>
                <td>{{ protein_variant }}</td>
                <td> c.{{ coding.0 }} {{ coding.1 }}/{{ coding.2}}</td>
                <td> {{ genomic.assembly }} Chr{{genomic.chromosome}}:{{genomic.gdna_start}} {{ coding.1 }}/{{ coding.2}}</td>
                <td> {{ variant_id }} </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <div id="buttons">
        <div id="browser_button">
          <a role="button" href={{browser_link}} class="btn btn-success" target="_blank">Genome Browser</a>
        </div>

        <div id="gnomad_button">
          <a role="button" href={{gnomad_link}} class="btn btn-dark" target="_blank">gnomAD</a>
        </div>
    </div>

    <table id="gnomad_table" class="table">
        <h6>{{ title }}</h6>
        <thead class="thead-light">
            <th scope="col">Ethnicity</th>
            <th scope="col">Allele Count</th>
            <th scope="col">Allele Number</th>
            <th scope="col">Homozygotes</th>
            <th scope="col">Allele Frequency</th>
        </thead>
        <tbody>
        {% for key, values in gnomad_data.items %}
            {% if key != 'totals' %}
                <tr>
                    <td>{{ key }}</td>
                    <td>{{ values.allele_count }}</td>
                    <td>{{ values.allele_number }}</td>
                    <td>{{ values.homozygotes }}</td>
                    <td>{{ values.allele_freq }}</td>
                </tr>
            {% endif %}
        {% endfor %}
        <tr>
            <td><b>TOTAL</b></td>
            <td>{{ gnomad_data.totals.allele_count }}</td>
            <td>{{ gnomad_data.totals.allele_number }}</td>
            <td>{{ gnomad_data.totals.homozygotes  }}</td>
            <td>{{ gnomad_data.totals.allele_freq }}</td>
        </tr>
        </tbody>
    </table>
{% endblock %}